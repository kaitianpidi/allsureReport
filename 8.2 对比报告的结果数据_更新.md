这是按你的数据，写的报告对比。 
增加了，比较其他信息。（ 比较test-cases中用例信息），更新的方法如下：
reportComparisonResult(String jobNameA, String buildAId, String buildBId)
compareSonCase(String uidA, String uidB) 

```
package com.compass.implementCaseController;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.*;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * 功能：
 * 1.提供访问allure报告的服务（3个）
 * 2. 提供allure报告的页面，（即放在<iframe></iframe> 的页面）
 * jabNameA：对比报告的jobName, 用来查看原来报告的位置。
 * jobNameABId:jabNameA+buildA+buildB , 用来作为 全局变量 Map 的key， 保存报告对比结果
 *
 */
@Controller
@RequestMapping("allureComparison/{jabName}/{buildAId}/{buildBId}")
public class allureReportCompController {
    //定义全局变量map：保存报告对比的结果
    //key:jobName+buildA+BuildB     value:JSONObject (对比后的suites.json)
     Map<String,JSONObject> resultMap= new HashMap<>();

    String allurePath="D:\\allureReport";  //该地址放到配置文件中。

    @RequestMapping("allureIndex")
    public String  allureIndex(@PathVariable("jabName")String jabName,@PathVariable("buildAId")String buildAId,@PathVariable("buildBId")String buildBId){
//        generateInitResult(jabName+buildAId+buildBId);  //初始化对比结果。
        reportComparisonResult(jabName,buildAId,buildBId);  //报告对比结果的方法
        return "allure2/allureIndex";
    }

    //模拟widgets的服务地址
    @RequestMapping(value = "/widgets/{fileName}")
    @ResponseBody
    public void getUrlFile(@PathVariable("fileName") String fileName,@PathVariable("jabName") String jabName,  HttpServletRequest request, HttpServletResponse response) {
        try {
            String requestURI = request.getRequestURI();  //allure2/jobName1/widgets/behaviors.json
            // 文件名+后缀名
            String name = requestURI.substring(requestURI.lastIndexOf("/")+1);
            response.sendRedirect("/allure2/"+jabName+"/widgets/"+name);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    //模拟data的服务地址
    @RequestMapping(value = "/data/{fileName}")
    @ResponseBody
    public void getUrlDataFile(@PathVariable("fileName") String fileName,@PathVariable("jabName") String jobName,@PathVariable("buildAId")String buildAId,
                               @PathVariable("buildBId")String buildBId,  HttpServletRequest request, HttpServletResponse response) {

        try {
            String requestURI = request.getRequestURI();  //allure2/jobName1/widgets/behaviors.json
            // 文件名+后缀名
            String name = requestURI.substring(requestURI.lastIndexOf("/")+1);
            if ("suites.json".equals(name)){
                getSuitesComparison(jobName+buildAId+buildBId,response);
            }else {
                response.sendRedirect("/allure2/"+jobName+"/data/"+name);
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    //模拟/data/test-cases的服务地址
    //http://localhost:29412/allure2/jobName1/data/test-cases/a1026196e7e593dd.json  模拟接收的 请求地址
    @RequestMapping(value = "/data/test-cases/{fileName}")
    @ResponseBody
    public void getUrlDataTestCaseFile(@PathVariable("fileName") String fileName,@PathVariable("jabName") String jobName,  HttpServletRequest request, HttpServletResponse response) {
        try {
            String requestURI = request.getRequestURI();  //allure2/jobName1/widgets/behaviors.json
            // 文件名+后缀名
            String name = requestURI.substring(requestURI.lastIndexOf("/")+1);
            response.sendRedirect("/allure2/"+jobName+"/data/test-cases/"+name);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * 初始化对比报告。（ suites.json 保留整体框架，去掉所有用例）。
     *  这里保留了测试的内容， 测试完后 用不到的，可以删除。
     */
    public void generateInitResult(String jobNameABId){
        String fileUrl ="D:\\allureReport\\jobName2\\allure-report\\data\\suites.json";  //替换成jobName中的suites.json的地址
        JSONObject json = JSONObject.fromObject(getJson(fileUrl));
        JSONArray children = json.getJSONArray("children");
        JSONObject object = children.getJSONObject(0);
        JSONArray children1 = object.getJSONArray("children");
        JSONObject object1 = children1.getJSONObject(0);
        JSONArray children2 = object1.getJSONArray("children");
        JSONObject object2 = children2.getJSONObject(0);

        ArrayList<JSONObject> list = new ArrayList<>();

//        JSONArray children3 = object2.getJSONArray("children");
//        for (int i = 0; i <5 ; i++) {
//            JSONObject o = children3.getJSONObject(i);
//            list.add(o);
//        }
//        object2.put("children",list);
        object.put("children",list);
//        System.out.println(json);
        resultMap.put(jobNameABId,json);
    }
 
    //获取json文件，返回json字符串
    public static String getJson(String fileUrl) {
        String jsonStr = "";
        try {
            File file = new File(fileUrl);
            FileReader fileReader = new FileReader(file);
            Reader reader = new InputStreamReader(new FileInputStream(file),"Utf-8");
            int ch = 0;
            StringBuffer sb = new StringBuffer();
            while ((ch = reader.read()) != -1) {
                sb.append((char) ch);
            }
            fileReader.close();
            reader.close();
            jsonStr = sb.toString();
            return jsonStr;
        } catch (Exception e) {
            return null;
        }
    }

    /**
     * JSONObject对象，以流的方式输出，返回到前端。
     * @param jobNameABId
     * @param response
     */
//参看https://www.cnblogs.com/limeiky/p/5851836.html
    private void getSuitesComparison(String jobNameABId,HttpServletResponse response) {
//        JSONObject jsonObject = JSONObject.fromObject(getJson());
        JSONObject jsonObject = resultMap.get(jobNameABId);
        if (jsonObject == null || jsonObject.isEmpty()){
            return;
        }
        PrintWriter out = null;
        try {
            out = response.getWriter();
            out.append(jsonObject.toString());
            out.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }finally {
            if (out!=null){out.close();}
        }
    }

    /**
     * 报告对比的方法，对比结果保留 resultMap 中。
     * @param jobNameA
     * @param buildAId
     * @param buildBId
     */

    private void reportComparisonResult(String jobNameA, String buildAId, String buildBId) {
//        String fileUrlA ="D:\\allureReport\\jobName1\\allure-report\\data\\suites.json";  //替换成jobName中的suites.json的地址

        String fileUrlA =allurePath+File.separator+jobNameA+File.separator+buildAId+"\\allure-report\\data\\suites.json";
        String fileUrlB =allurePath+File.separator+jobNameA+File.separator+buildBId+"\\allure-report\\data\\suites.json";

        JSONObject json = JSONObject.fromObject(getJson(fileUrlA));
        JSONArray children = json.getJSONArray("children");
        JSONObject object = children.getJSONObject(0);
        JSONArray children1 = object.getJSONArray("children");

        //获取buildA 不是passed 状态的 用例
        //看数据知道，用例是在第2个children中，不是以前的第4个children
        ArrayList<JSONObject> listA = new ArrayList<>();
        for (int i = 0; i <children1.size() ; i++) {
            JSONObject object1 = children1.getJSONObject(i);
            JSONArray children2 = object1.getJSONArray("children");
            JSONObject object2 = children2.getJSONObject(0);
            JSONArray children3 = object2.getJSONArray("children");
            JSONObject o = children3.getJSONObject(0);
            if(!(o.get("status").equals("passed"))){
                listA.add(object1);
            }
        }
        //获取buildB中的用例
        List<JSONObject> listB = buildAFildResult(fileUrlB);

        ArrayList<JSONObject> resultList = new ArrayList<>();
        //比较 listA和listB ,获取与listA的用例错误不一样的用例
        for (JSONObject jsonObjectA : listA) {
            String uid = (String) jsonObjectA.get("uid");
//            JSONArray children2 = jsonObject.getJSONArray("children");
//            JSONObject object2 = children2.getJSONObject(0);
//            JSONArray children3 = object2.getJSONArray("children");
//            JSONObject o = children3.getJSONObject(0);
            JSONObject o = jsonObjectA.getJSONArray("children").getJSONObject(0).getJSONArray("children").getJSONObject(0);
            //在listB中查找与该用例相同的用例
            //如果用例状态不同，则保留；
            // 如果状态相同，继续比较用例其他信息，如果其他信息也不同，则保留，相同不保留
            for (JSONObject jsonObjectB : listB) {
                if (uid.equals(jsonObjectB.get("uid"))){
                    JSONObject o2 = jsonObjectB.getJSONArray("children").getJSONObject(0).getJSONArray("children").getJSONObject(0);
                    if (o.get("status").equals(o2.get("status"))){
                       //状态相同，继续比较 其他信息。
                       //比较 data\test-cases 中的子用例,如果其他错误信息相同，则不保存。否则保存
                        String caseUrlA =allurePath+File.separator+jobNameA+File.separator+buildAId+"\\allure-report\\data\\test-cases\\"+o.get("uid")+".json";
                        String caseUrlB =allurePath+File.separator+jobNameA+File.separator+buildBId+"\\allure-report\\data\\test-cases\\"+o2.get("uid")+".json";
                       boolean  isSame=  compareSonCase(caseUrlA,caseUrlB);
                        if (!isSame){
                            //其他错误信息不相同
                            resultList.add(jsonObjectA);
                        }
                    }else {
                        //如果状态不同，则保存该用例对象jsonObjectA
                        resultList.add(jsonObjectA);
                    }
                    break; //跳出循环
                }
            }
        }
        object.put("children",resultList);  //用例对比结果，替换原来的用例
        resultMap.put(jobNameA+buildAId+buildBId, json); //对比结果更新后的json，保存到全局变量

    }

    /**
     * 比较 data\test-cases 中的子用例,其他错误信息
     * 该方法，比较了用例的 testStage 中每个步骤的状态。
     * 如需 比较其他信息，可增加。
     * @param uidA
     * @param uidB
     * @return  true 错误信息相同， false 错误信息不相同
     */
    private boolean compareSonCase(String uidA, String uidB) {
        JSONObject testStageA = testStage(uidA);
        JSONObject testStageB = testStage(uidB);
        if (testStageA.get("status").equals(testStageB.get("status"))){
            JSONArray stepsA = testStageA.getJSONArray("steps");
            JSONArray stepsB = testStageB.getJSONArray("steps");
            Integer stepsCount = (Integer) testStageA.get("stepsCount");
            for (int i = 0; i < stepsCount; i++) {
                if ( !(((JSONObject) stepsA.get(i)).get("status").equals( ((JSONObject) stepsB.get(i)).get("status")))){
                    return false; //不等，返回false
                }
            }
            return true;

        }else {
            return false;
        }
    }

    public  JSONObject  testStage(String fileUrl){
        JSONObject json = JSONObject.fromObject(getJson(fileUrl));
        return (JSONObject) json.get("testStage");
    }
    public List<JSONObject> buildAFildResult(String jfileUrl){
        JSONObject json = JSONObject.fromObject(getJson(jfileUrl));
        JSONArray children = json.getJSONArray("children");
        JSONObject object = children.getJSONObject(0);
        JSONArray children1 = object.getJSONArray("children");
        return children1;
        
    }

}


```
